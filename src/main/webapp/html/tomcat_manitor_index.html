<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="../js/jquery-1.8.3.js"></script>
    <script src="../js/yls/echarts.min.js"></script>

    <script src="../js/tomcat/tomcat_monitor.js"></script>
    <script src="../js/common/utils.js"></script>
    <style>
        *{margin:0;padding:0;}
        body,html{
            height: 97%;
            width: 97%;
            padding: 1%;
        }
        .main-top-left,.main-top-right,.main-bottom-left,.main-bottom-right{
            width: 50%;
            height: 50%;
        }
        .main-top-left{
            background-color: yellow;
            display: inline-block;
        }
        .main-top-right{
            background-color: red;
            float: right;
        }
        .main-bottom-left{
            background-color: green;
            display: inline-block;

        }
        .main-bottom-right{
            background-color: gray;
            float: right;
        }
    </style>
</head>
<body>
<div class="main-top-left" id="main-top-left">左列</div>
<div class="main-top-right" id="main-top-right">右列</div>
<div class="main-bottom-left" id="main-bottom-left">左列</div>
<div class="main-bottom-right" id="main-bottom-right">右列</div>
<!--<div id='a' style="width: 50px;height: 80px;background-color: red;"></div>
<div id='b' style="width: 50px;height: 80px;background-color: red;"></div>-->
</body>

<script>
    //		$("#a").click(function(event){
    //  		$("#b").show();
    //  		event.stop();
    //		});
    //
    //		$(document).click(function(){
    //			$("#b").hide()
    //		});
    // 基于准备好的dom，初始化echarts实例
    var myChart_top_left = echarts.init(document.getElementById('main-top-left'));
    // 基于准备好的dom，初始化echarts实例
    var myChart_top_right = echarts.init(document.getElementById('main-top-right'));
    // 基于准备好的dom，初始化echarts实例
    var myChart_bottom_left = echarts.init(document.getElementById('main-bottom-left'));
    // 基于准备好的dom，初始化echarts实例
    var myChart_bottom_right = echarts.init(document.getElementById('main-bottom-right'));

    var option = getOption();
    myChart_top_left.setOption(option);
    myChart_top_right.setOption(option);
    myChart_bottom_left.setOption(option);
    myChart_bottom_right.setOption(option);
    var date = [];
    var newData = [];
    var memoryData = [];
    var jvmData = [];
    setInterval(function() {
        date.push(getNowTime());
        $.post("../getTomcatInfo.do",function(data,status){
            // alert("Data: " + data + "nStatus: " + status);
            //获取请求的数据，并转为json开始解析
            var tomcatJosnData = JSON.parse(data).tomcat_1;
            //内存使用情况
            var memory = tomcatJosnData.memory
            newData.push((memory.total-memory.free)/1024/1024);
            memoryData.push((memory.total-memory.free)/1024/1024);

            //jvm使用情况
            //vat jvm = tomcatJosnData.

            //线程情况
            var threadInfo = tomcatJosnData.threadInfo;

            myChart_top_left.setOption({
                title:{
                    text:'内存使用情况(max:'+memory.max/1024/1024+'MB)'
                },
                xAxis: {
                    data: date
                },
                series: [{
                    name:'内存使用情况',
                    data: memoryData
                }]
            });
            myChart_top_right.setOption({
                title:{
                    text:'jvm使用情况'
                },
                xAxis: {
                    data: date
                },
                series: [{
                    name:'jvm使用情况',
                    data: newData
                }]
            });
            myChart_bottom_left.setOption({
                title:{
                    text:'连接使用情况'
                },
                xAxis: {
                    data: date
                },
                series: [{
                    name:'连接使用情况',
                    data: newData
                }]
            });
            myChart_bottom_right.setOption({
                title:{
                    text:'线程使用情况'
                },
                xAxis: {
                    data: date
                },
                series: [{
                    name:'线程使用情况',
                    data: newData
                }]
            });
        });


    }, 1000);
</script>
</html>
